<div class="space-y-6">
  <app-data-grid
    [config]="gridConfig"
    (stateChange)="handleGridStateChange($event)"
    (selectionChange)="handleSelectionChanged($event)"
    (create)="handleCreate()"
    (edit)="handleEdit($event)"
    (delete)="handleDelete($event)"
  />

  <dialog id="new_client_modal" class="modal">
    <div class="modal-box max-w-lg bg-base-100 border border-base-300">
      <form method="dialog">
        <button class="btn btn-sm btn-circle btn-ghost absolute right-4 top-4">x</button>
      </form>

      <div class="flex items-center gap-3 mb-6">
        <div class="w-12 h-12 rounded-xl bg-primary flex items-center justify-center">
          <lucide-icon [name]="icons.UserPlus" class="h-6 w-6 text-white"></lucide-icon>
        </div>
        <div>
          <h3 class="text-lg font-bold text-base-content">
            {{ 'CLIENTS.MODAL.TITLE' | translate }}
          </h3>
          <p class="text-sm text-base-content/60">{{ 'CLIENTS.MODAL.SUBTITLE' | translate }}</p>
        </div>
      </div>

      <div class="space-y-4">
        <div>
          <label class="block text-sm font-medium text-base-content mb-1">{{
            'CLIENTS.MODAL.TYPE' | translate
          }}</label>
          <div class="flex gap-2">
            <button
              type="button"
              class="flex-1 py-3 rounded-xl font-medium transition-all"
              [class]="
                newClient.type === 'individual'
                  ? 'bg-primary text-white'
                  : 'bg-base-200 text-base-content/70'
              "
              (click)="newClient.type = 'individual'"
            >
              {{ 'CLIENTS.CARD.INDIVIDUAL' | translate }}
            </button>
            <button
              type="button"
              class="flex-1 py-3 rounded-xl font-medium transition-all"
              [class]="
                newClient.type === 'company'
                  ? 'bg-primary text-white'
                  : 'bg-base-200 text-base-content/70'
              "
              (click)="newClient.type = 'company'"
            >
              {{ 'CLIENTS.CARD.COMPANY' | translate }}
            </button>
          </div>
        </div>

        <div>
          <label class="block text-sm font-medium text-base-content mb-1">{{
            'CLIENTS.MODAL.FULL_NAME' | translate
          }}</label>
          <input
            type="text"
            [placeholder]="'CLIENTS.MODAL.PLACEHOLDER_NAME' | translate"
            class="w-full px-4 py-3 bg-base-200 border-0 rounded-xl focus:ring-2 focus:ring-primary/20 focus:bg-base-100 transition-all"
            [(ngModel)]="newClient.name"
          />
        </div>

        @if (newClient.type === 'company') {
          <div>
            <label class="block text-sm font-medium text-base-content mb-1">{{
              'CLIENTS.MODAL.COMPANY_NAME' | translate
            }}</label>
            <input
              type="text"
              [placeholder]="'CLIENTS.MODAL.PLACEHOLDER_COMPANY' | translate"
              class="w-full px-4 py-3 bg-base-200 border-0 rounded-xl focus:ring-2 focus:ring-primary/20 focus:bg-base-100 transition-all"
              [(ngModel)]="newClient.company"
            />
          </div>
        }

        <div>
          <label class="block text-sm font-medium text-base-content mb-1">{{
            'CLIENTS.MODAL.EMAIL' | translate
          }}</label>
          <input
            type="email"
            [placeholder]="'CLIENTS.MODAL.PLACEHOLDER_EMAIL' | translate"
            class="w-full px-4 py-3 bg-base-200 border-0 rounded-xl focus:ring-2 focus:ring-primary/20 focus:bg-base-100 transition-all"
            [(ngModel)]="newClient.email"
          />
        </div>

        <div>
          <label class="block text-sm font-medium text-base-content mb-1">{{
            'CLIENTS.MODAL.PHONE' | translate
          }}</label>
          <input
            type="tel"
            [placeholder]="'CLIENTS.MODAL.PLACEHOLDER_PHONE' | translate"
            class="w-full px-4 py-3 bg-base-200 border-0 rounded-xl focus:ring-2 focus:ring-primary/20 focus:bg-base-100 transition-all"
            [(ngModel)]="newClient.phone"
          />
        </div>
      </div>

      <div class="flex justify-end gap-3 mt-6 pt-6 border-t border-base-200">
        <form method="dialog">
          <button class="btn btn-ghost">{{ 'CLIENTS.MODAL.CANCEL' | translate }}</button>
        </form>
        <button class="btn btn-primary" (click)="createClient()">
          <lucide-icon [name]="icons.CircleCheckBig" class="h-5 w-5 mr-2"></lucide-icon>
          {{ 'CLIENTS.MODAL.CREATE' | translate }}
        </button>
      </div>
    </div>
    <form method="dialog" class="modal-backdrop bg-base-content/30 backdrop-blur-sm">
      <button>{{ 'COMMON.CLOSE' | translate }}</button>
    </form>
  </dialog>

  <dialog id="edit_client_modal" class="modal">
    <div class="modal-box max-w-lg bg-base-100 border border-base-300">
      <form method="dialog">
        <button class="btn btn-sm btn-circle btn-ghost absolute right-4 top-4">x</button>
      </form>

      <div class="flex items-center gap-3 mb-6">
        <div class="w-12 h-12 rounded-xl bg-primary flex items-center justify-center">
          <lucide-icon [name]="icons.Pencil" class="h-6 w-6 text-white"></lucide-icon>
        </div>
        <div>
          <h3 class="text-lg font-bold text-base-content">
            {{ 'CLIENTS.MODAL.EDIT_TITLE' | translate }}
          </h3>
          <p class="text-sm text-base-content/60">{{ editClient.name }}</p>
        </div>
      </div>

      <div class="space-y-4">
        <div>
          <label class="block text-sm font-medium text-base-content mb-1">{{
            'CLIENTS.MODAL.TYPE' | translate
          }}</label>
          <div class="flex gap-2">
            <button
              type="button"
              class="flex-1 py-3 rounded-xl font-medium transition-all"
              [class]="
                editClient.type === 'individual'
                  ? 'bg-primary text-white'
                  : 'bg-base-200 text-base-content/70'
              "
              (click)="editClient.type = 'individual'"
            >
              {{ 'CLIENTS.CARD.INDIVIDUAL' | translate }}
            </button>
            <button
              type="button"
              class="flex-1 py-3 rounded-xl font-medium transition-all"
              [class]="
                editClient.type === 'company'
                  ? 'bg-primary text-white'
                  : 'bg-base-200 text-base-content/70'
              "
              (click)="editClient.type = 'company'"
            >
              {{ 'CLIENTS.CARD.COMPANY' | translate }}
            </button>
          </div>
        </div>

        <div>
          <label class="block text-sm font-medium text-base-content mb-1">{{
            'CLIENTS.MODAL.FULL_NAME' | translate
          }}</label>
          <input
            type="text"
            class="w-full px-4 py-3 bg-base-200 border-0 rounded-xl focus:ring-2 focus:ring-primary/20 focus:bg-base-100 transition-all"
            [(ngModel)]="editClient.name"
          />
        </div>

        @if (editClient.type === 'company') {
          <div>
            <label class="block text-sm font-medium text-base-content mb-1">{{
              'CLIENTS.MODAL.COMPANY_NAME' | translate
            }}</label>
            <input
              type="text"
              class="w-full px-4 py-3 bg-base-200 border-0 rounded-xl focus:ring-2 focus:ring-primary/20 focus:bg-base-100 transition-all"
              [(ngModel)]="editClient.company"
            />
          </div>
        }

        <div>
          <label class="block text-sm font-medium text-base-content mb-1">{{
            'CLIENTS.MODAL.EMAIL' | translate
          }}</label>
          <input
            type="email"
            class="w-full px-4 py-3 bg-base-200 border-0 rounded-xl focus:ring-2 focus:ring-primary/20 focus:bg-base-100 transition-all"
            [(ngModel)]="editClient.email"
          />
        </div>

        <div>
          <label class="block text-sm font-medium text-base-content mb-1">{{
            'CLIENTS.MODAL.PHONE' | translate
          }}</label>
          <input
            type="tel"
            class="w-full px-4 py-3 bg-base-200 border-0 rounded-xl focus:ring-2 focus:ring-primary/20 focus:bg-base-100 transition-all"
            [(ngModel)]="editClient.phone"
          />
        </div>
      </div>

      <div class="flex justify-end gap-3 mt-6 pt-6 border-t border-base-200">
        <form method="dialog">
          <button class="btn btn-ghost">{{ 'CLIENTS.MODAL.CANCEL' | translate }}</button>
        </form>
        <button class="btn btn-primary" (click)="saveEditClient()">
          <lucide-icon [name]="icons.CircleCheckBig" class="h-5 w-5 mr-2"></lucide-icon>
          {{ 'VEHICLE.DETAIL.SAVE_CHANGES' | translate }}
        </button>
      </div>
    </div>
    <form method="dialog" class="modal-backdrop bg-base-content/30 backdrop-blur-sm">
      <button>{{ 'COMMON.CLOSE' | translate }}</button>
    </form>
  </dialog>
</div>
