<div
  class="h-full flex flex-col bg-white shadow-md"
  [class.overflow-hidden]="!collapsed"
  [class.overflow-visible]="collapsed"
>
  <!-- Navigation -->
  <nav class="flex-1 py-2 mt-2 overflow-y-auto overflow-x-visible min-w-0">
    <div class="flex flex-col" [class.space-y-6]="!collapsed" [class.space-y-1]="collapsed">
      <!-- PRINCIPAL -->
      <div class="flex flex-col" [class.space-y-1]="collapsed">
        <div
          class="px-4 mb-2 transition-all duration-300 overflow-hidden"
          [class.opacity-0]="collapsed"
          [class.h-0]="collapsed"
          [class.mb-0]="collapsed"
        >
          <span
            class="text-[12px] font-bold text-base-content/40 uppercase tracking-[0.2em] whitespace-nowrap"
          >
            {{ 'SHELL.SIDEBAR.GROUP_MAIN' | translate }}
          </span>
        </div>
        <div class="flex flex-col" [class.space-y-1.5]="!collapsed" [class.space-y-1]="collapsed">
          <a
            routerLink="/dashboard"
            [routerLinkActive]="'!bg-secondary/30'"
            [routerLinkActiveOptions]="{ exact: true }"
            class="nav-link flex items-center py-3 text-sm text-gray-700 hover:bg-secondary/40 transition-colors group w-full"
            [class.px-4]="!collapsed"
            [class.px-3]="collapsed"
            [class.justify-center]="collapsed"
            [title]="collapsed ? ('SHELL.SIDEBAR.DASHBOARD' | translate) : ''"
            (click)="sidenavMode === 'over' ? toggleSidebarAfterSelect.emit() : null"
          >
            <span class="flex items-center justify-center flex-none w-8 h-8 rounded-lg">
              <lucide-icon
                [name]="icons.LayoutDashboard"
                class="h-6 w-6"
                [class.text-primary]="isRouteActive('/dashboard')"
                [class.text-gray-500]="!isRouteActive('/dashboard')"
              ></lucide-icon>
            </span>
            @if (!collapsed) {
              <span class="ml-3 truncate">{{ 'SHELL.SIDEBAR.DASHBOARD' | translate }}</span>
            }
          </a>

          <a
            routerLink="/vehicles-instances"
            [routerLinkActive]="'!bg-secondary/30'"
            class="nav-link flex items-center py-3 text-sm text-gray-700 hover:bg-secondary/40 transition-colors group w-full"
            [class.px-4]="!collapsed"
            [class.px-3]="collapsed"
            [class.justify-center]="collapsed"
            [title]="collapsed ? ('SHELL.SIDEBAR.VEHICLES_INSTANCES' | translate) : ''"
            (click)="sidenavMode === 'over' ? toggleSidebarAfterSelect.emit() : null"
          >
            <span class="flex items-center justify-center flex-none w-8 h-8 rounded-lg">
              <lucide-icon
                [name]="icons.Car"
                class="h-6 w-6"
                [class.text-primary]="isRouteActive('/vehicles-instances')"
                [class.text-gray-500]="!isRouteActive('/vehicles-instances')"
              ></lucide-icon>
            </span>
            @if (!collapsed) {
              <span class="ml-3 truncate">{{
                'SHELL.SIDEBAR.VEHICLES_INSTANCES' | translate
              }}</span>
            }
          </a>

          <a
            routerLink="/vehicles-database"
            [routerLinkActive]="'!bg-secondary/30'"
            class="nav-link flex items-center py-3 text-sm text-gray-700 hover:bg-secondary/40 transition-colors group w-full"
            [class.px-4]="!collapsed"
            [class.px-3]="collapsed"
            [class.justify-center]="collapsed"
            [title]="collapsed ? ('SHELL.SIDEBAR.VEHICLES_DATABASE' | translate) : ''"
            (click)="sidenavMode === 'over' ? toggleSidebarAfterSelect.emit() : null"
          >
            <span class="flex items-center justify-center flex-none w-8 h-8 rounded-lg">
              <lucide-icon
                [name]="icons.Database"
                class="h-6 w-6"
                [class.text-primary]="isRouteActive('/vehicles-database')"
                [class.text-gray-500]="!isRouteActive('/vehicles-database')"
              ></lucide-icon>
            </span>
            @if (!collapsed) {
              <span class="ml-3 truncate">{{ 'SHELL.SIDEBAR.VEHICLES_DATABASE' | translate }}</span>
            }
          </a>
        </div>
      </div>

      <!-- OPERACIONES -->
      <div class="flex flex-col" [class.space-y-1]="collapsed">
        <div
          class="px-4 mb-2 transition-all duration-300 overflow-hidden"
          [class.opacity-0]="collapsed"
          [class.h-0]="collapsed"
          [class.mb-0]="collapsed"
        >
          <span
            class="text-[12px] font-bold text-base-content/40 uppercase tracking-[0.2em] whitespace-nowrap"
          >
            {{ 'SHELL.SIDEBAR.GROUP_OPERATIONS' | translate }}
          </span>
        </div>
        <div class="flex flex-col" [class.space-y-1.5]="!collapsed" [class.space-y-1]="collapsed">
          <a
            routerLink="/inspection"
            [routerLinkActive]="'!bg-secondary/30'"
            class="nav-link flex items-center py-3 text-sm text-gray-700 hover:bg-secondary/40 transition-colors group w-full"
            [class.px-4]="!collapsed"
            [class.px-3]="collapsed"
            [class.justify-center]="collapsed"
            [title]="collapsed ? ('SHELL.SIDEBAR.INSPECTION' | translate) : ''"
            (click)="sidenavMode === 'over' ? toggleSidebarAfterSelect.emit() : null"
          >
            <span class="flex items-center justify-center flex-none w-8 h-8 rounded-lg">
              <lucide-icon
                [name]="icons.ClipboardCheck"
                class="h-6 w-6"
                [class.text-primary]="isRouteActive('/inspection')"
                [class.text-gray-500]="!isRouteActive('/inspection')"
              ></lucide-icon>
            </span>
            @if (!collapsed) {
              <span class="ml-3 truncate">{{ 'SHELL.SIDEBAR.INSPECTION' | translate }}</span>
            }
          </a>

          <a
            routerLink="/inspection-history"
            [routerLinkActive]="'!bg-secondary/30'"
            class="nav-link flex items-center py-3 text-sm text-gray-700 hover:bg-secondary/40 transition-colors group w-full"
            [class.px-4]="!collapsed"
            [class.px-3]="collapsed"
            [class.justify-center]="collapsed"
            [title]="collapsed ? ('SHELL.SIDEBAR.INSPECTION_HISTORY' | translate) : ''"
            (click)="sidenavMode === 'over' ? toggleSidebarAfterSelect.emit() : null"
          >
            <span class="flex items-center justify-center flex-none w-8 h-8 rounded-lg">
              <lucide-icon
                [name]="icons.Clock"
                class="h-6 w-6"
                [class.text-primary]="isRouteActive('/inspection-history')"
                [class.text-gray-500]="!isRouteActive('/inspection-history')"
              ></lucide-icon>
            </span>
            @if (!collapsed) {
              <span class="ml-3 truncate">{{
                'SHELL.SIDEBAR.INSPECTION_HISTORY' | translate
              }}</span>
            }
          </a>

          <a
            routerLink="/scheduling"
            [routerLinkActive]="'!bg-secondary/30'"
            class="nav-link flex items-center py-3 text-sm text-gray-700 hover:bg-secondary/40 transition-colors group w-full"
            [class.px-4]="!collapsed"
            [class.px-3]="collapsed"
            [class.justify-center]="collapsed"
            [title]="collapsed ? ('SHELL.SIDEBAR.SCHEDULING' | translate) : ''"
            (click)="sidenavMode === 'over' ? toggleSidebarAfterSelect.emit() : null"
          >
            <span class="flex items-center justify-center flex-none w-8 h-8 rounded-lg">
              <lucide-icon
                [name]="icons.Calendar"
                class="h-6 w-6"
                [class.text-primary]="isRouteActive('/scheduling')"
                [class.text-gray-500]="!isRouteActive('/scheduling')"
              ></lucide-icon>
            </span>
            @if (!collapsed) {
              <span class="ml-3 truncate">{{ 'SHELL.SIDEBAR.SCHEDULING' | translate }}</span>
            }
          </a>

          <a
            routerLink="/tasks"
            [routerLinkActive]="'!bg-secondary/30'"
            class="nav-link flex items-center py-3 text-sm text-gray-700 hover:bg-secondary/40 transition-colors group w-full"
            [class.px-4]="!collapsed"
            [class.px-3]="collapsed"
            [class.justify-center]="collapsed"
            [title]="collapsed ? ('SHELL.SIDEBAR.TASKS' | translate) : ''"
            (click)="sidenavMode === 'over' ? toggleSidebarAfterSelect.emit() : null"
          >
            <span class="flex items-center justify-center flex-none w-8 h-8 rounded-lg">
              <lucide-icon
                [name]="icons.Wrench"
                class="h-6 w-6"
                [class.text-primary]="isRouteActive('/tasks')"
                [class.text-gray-500]="!isRouteActive('/tasks')"
              ></lucide-icon>
            </span>
            @if (!collapsed) {
              <span class="ml-3 truncate">{{ 'SHELL.SIDEBAR.TASKS' | translate }}</span>
            }
          </a>

          <a
            routerLink="/invoicing"
            [routerLinkActive]="'!bg-secondary/30'"
            class="nav-link flex items-center py-3 text-sm text-gray-700 hover:bg-secondary/40 transition-colors group w-full"
            [class.px-4]="!collapsed"
            [class.px-3]="collapsed"
            [class.justify-center]="collapsed"
            [title]="collapsed ? ('SHELL.SIDEBAR.INVOICING' | translate) : ''"
            (click)="sidenavMode === 'over' ? toggleSidebarAfterSelect.emit() : null"
          >
            <span class="flex items-center justify-center flex-none w-8 h-8 rounded-lg">
              <lucide-icon
                [name]="icons.FileText"
                class="h-6 w-6"
                [class.text-primary]="isRouteActive('/invoicing')"
                [class.text-gray-500]="!isRouteActive('/invoicing')"
              ></lucide-icon>
            </span>
            @if (!collapsed) {
              <span class="ml-3 truncate">{{ 'SHELL.SIDEBAR.INVOICING' | translate }}</span>
            }
          </a>

          <a
            routerLink="/estimation"
            [routerLinkActive]="'!bg-secondary/30'"
            class="nav-link flex items-center py-3 text-sm text-gray-700 hover:bg-secondary/40 transition-colors group w-full"
            [class.px-4]="!collapsed"
            [class.px-3]="collapsed"
            [class.justify-center]="collapsed"
            [title]="collapsed ? ('SHELL.SIDEBAR.ESTIMATION' | translate) : ''"
            (click)="sidenavMode === 'over' ? toggleSidebarAfterSelect.emit() : null"
          >
            <span class="flex items-center justify-center flex-none w-8 h-8 rounded-lg">
              <lucide-icon
                [name]="icons.DollarSign"
                class="h-6 w-6"
                [class.text-primary]="isRouteActive('/estimation')"
                [class.text-gray-500]="!isRouteActive('/estimation')"
              ></lucide-icon>
            </span>
            @if (!collapsed) {
              <span class="ml-3 truncate">{{ 'SHELL.SIDEBAR.ESTIMATION' | translate }}</span>
            }
          </a>
        </div>
      </div>

      <!-- CLIENTE -->
      <div class="flex flex-col" [class.space-y-1]="collapsed">
        <div
          class="px-4 mb-2 transition-all duration-300 overflow-hidden"
          [class.opacity-0]="collapsed"
          [class.h-0]="collapsed"
          [class.mb-0]="collapsed"
        >
          <span
            class="text-[12px] font-bold text-base-content/40 uppercase tracking-[0.2em] whitespace-nowrap"
          >
            {{ 'SHELL.SIDEBAR.GROUP_CUSTOMER' | translate }}
          </span>
        </div>
        <div class="flex flex-col" [class.space-y-1.5]="!collapsed" [class.space-y-1]="collapsed">
          <a
            routerLink="/customer-approvals"
            [routerLinkActive]="'!bg-secondary/30'"
            class="nav-link flex items-center py-3 text-sm text-gray-700 hover:bg-secondary/40 transition-colors group w-full"
            [class.px-4]="!collapsed"
            [class.px-3]="collapsed"
            [class.justify-center]="collapsed"
            [title]="collapsed ? ('SHELL.SIDEBAR.APPROVALS' | translate) : ''"
            (click)="sidenavMode === 'over' ? toggleSidebarAfterSelect.emit() : null"
          >
            <span class="flex items-center justify-center flex-none w-8 h-8 rounded-lg">
              <lucide-icon
                [name]="icons.User"
                class="h-6 w-6"
                [class.text-primary]="isRouteActive('/customer-approvals')"
                [class.text-gray-500]="!isRouteActive('/customer-approvals')"
              ></lucide-icon>
            </span>
            @if (!collapsed) {
              <span class="ml-3 truncate">{{ 'SHELL.SIDEBAR.APPROVALS' | translate }}</span>
            }
          </a>
        </div>
      </div>

      <!-- CONFIGURACIÃ“N -->
      <div class="flex flex-col" [class.space-y-1]="collapsed">
        <div
          class="px-4 mb-2 transition-all duration-300 overflow-hidden"
          [class.opacity-0]="collapsed"
          [class.h-0]="collapsed"
          [class.mb-0]="collapsed"
        >
          <span
            class="text-[12px] font-bold text-base-content/40 uppercase tracking-[0.2em] whitespace-nowrap"
          >
            {{ 'SHELL.SIDEBAR.GROUP_SETTINGS' | translate }}
          </span>
        </div>
        <div class="flex flex-col" [class.space-y-1.5]="!collapsed" [class.space-y-1]="collapsed">
          <a
            routerLink="/clients"
            [routerLinkActive]="'!bg-secondary/30'"
            class="nav-link flex items-center py-3 text-sm text-gray-700 hover:bg-secondary/40 transition-colors group w-full"
            [class.px-4]="!collapsed"
            [class.px-3]="collapsed"
            [class.justify-center]="collapsed"
            [title]="collapsed ? ('SHELL.SIDEBAR.CLIENTS' | translate) : ''"
            (click)="sidenavMode === 'over' ? toggleSidebarAfterSelect.emit() : null"
          >
            <span class="flex items-center justify-center flex-none w-8 h-8 rounded-lg">
              <lucide-icon
                [name]="icons.Users"
                class="h-6 w-6"
                [class.text-primary]="isRouteActive('/clients')"
                [class.text-gray-500]="!isRouteActive('/clients')"
              ></lucide-icon>
            </span>
            @if (!collapsed) {
              <span class="ml-3 truncate">{{ 'SHELL.SIDEBAR.CLIENTS' | translate }}</span>
            }
          </a>

          <a
            routerLink="/settings"
            [routerLinkActive]="'!bg-secondary/30'"
            class="nav-link flex items-center py-3 text-sm text-gray-700 hover:bg-secondary/40 transition-colors group w-full"
            [class.px-4]="!collapsed"
            [class.px-3]="collapsed"
            [class.justify-center]="collapsed"
            [title]="collapsed ? ('SHELL.SIDEBAR.SETTINGS_LINK' | translate) : ''"
            (click)="sidenavMode === 'over' ? toggleSidebarAfterSelect.emit() : null"
          >
            <span class="flex items-center justify-center flex-none w-8 h-8 rounded-lg">
              <lucide-icon
                [name]="icons.Settings"
                class="h-6 w-6"
                [class.text-primary]="isRouteActive('/settings')"
                [class.text-gray-500]="!isRouteActive('/settings')"
              ></lucide-icon>
            </span>
            @if (!collapsed) {
              <span class="ml-3 truncate">{{ 'SHELL.SIDEBAR.SETTINGS_LINK' | translate }}</span>
            }
          </a>
        </div>
      </div>
    </div>
  </nav>
</div>
